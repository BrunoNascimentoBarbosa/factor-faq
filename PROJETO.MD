# Factor FAQ - Sistema de Perguntas Frequentes

## Vis√£o Geral
Sistema moderno de FAQ (Perguntas Frequentes) para a empresa FACTOR, que desenvolve sistemas para transportadoras. Constru√≠do com React no frontend e Node.js no backend, seguindo as melhores pr√°ticas de desenvolvimento.

---

## üé® Identidade Visual

### Paleta de Cores
- **Cor Principal**: `#FFAD42` (laranja) - Usar em bot√µes, destaques, √≠cones e elementos interativos
- **Cor Secund√°ria**: `#2C3E50` (azul escuro) - Textos principais e elementos estruturais
- **Cor de Fundo**: `#F8F9FA` (cinza claro)
- **Cor de Destaque**: `#FFFFFF` (branco) - Cards e elementos de conte√∫do

### Design System
- Layout limpo e responsivo com foco em UX
- Tipografia clara e leg√≠vel (sugest√£o: Inter, Poppins ou Roboto)
- Design que transmite confiabilidade, tecnologia e suporte pr√≥ximo ao cliente
- √çcones minimalistas (Lucide React ou React Icons)

---

## üèóÔ∏è Arquitetura do Sistema

### Frontend - React
```
frontend/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îî‚îÄ‚îÄ assets/
‚îÇ       ‚îî‚îÄ‚îÄ atendente.jpg
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/                          # Cliente API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ axios.js                  # Configura√ß√£o Axios
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ endpoints.js              # Defini√ß√£o de endpoints
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/                   # Componentes reutiliz√°veis
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Input/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchBar/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Modal/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ YouTubeEmbed/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Footer/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Sidebar/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ faq/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FAQItem/              # Card de FAQ expans√≠vel
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FAQList/              # Lista de FAQs
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CategoryFilter/       # Filtro de categorias
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ VoteButtons/          # Bot√µes √ötil/N√£o √ötil
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ WhatsAppButton/       # Bot√£o de atendimento
‚îÇ   ‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.jsx           # Contexto de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FAQContext.jsx            # Contexto de FAQs
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAuth.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useFAQs.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useSearch.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useCategories.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useDebounce.js
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Home/                     # P√°gina principal com FAQs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin/                    # Painel administrativo
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FAQForm.jsx           # Criar/Editar FAQ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FAQManagement.jsx     # Gerenciar FAQs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Login/                    # Login admin
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AppRoutes.jsx             # Configura√ß√£o de rotas
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ faqService.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authService.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ categoryService.js
‚îÇ   ‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ theme.js                  # Tema com cores da FACTOR
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validators.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatters.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.js              # Categorias, etc
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx
‚îÇ   ‚îú‚îÄ‚îÄ main.jsx
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.js
‚îú‚îÄ‚îÄ .env.development
‚îú‚îÄ‚îÄ .env.production
‚îú‚îÄ‚îÄ tailwind.config.js
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

### Backend - Node.js
```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.js               # Configura√ß√£o MongoDB/PostgreSQL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ env.js                    # Valida√ß√£o vari√°veis de ambiente
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cors.js                   # Configura√ß√£o CORS
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ faqController.js          # CRUD de FAQs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authController.js         # Login/Registro
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ categoryController.js     # Gest√£o de categorias
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ voteController.js         # Sistema de votos
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js                   # Verifica√ß√£o JWT
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validate.js               # Valida√ß√£o de dados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js           # Handler de erros global
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rateLimiter.js            # Rate limiting
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FAQ.js                    # Schema FAQ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.js                   # Schema Usu√°rio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Category.js               # Schema Categoria
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Vote.js                   # Schema Voto
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js                  # Router principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ faqRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ categoryRoutes.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ voteRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ faqService.js             # L√≥gica de neg√≥cio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authService.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ searchService.js          # Busca e filtros
‚îÇ   ‚îú‚îÄ‚îÄ validators/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ faqValidator.js           # Schemas Joi/Zod
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authValidator.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ categoryValidator.js
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.js                 # Winston logger
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ responseFormatter.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ youtubeParser.js          # Extra√ß√£o ID do YouTube
‚îÇ   ‚îú‚îÄ‚îÄ app.js                        # Configura√ß√£o Express
‚îÇ   ‚îî‚îÄ‚îÄ server.js                     # Entry point
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îî‚îÄ‚îÄ fixtures/
‚îú‚îÄ‚îÄ .env.development
‚îú‚îÄ‚îÄ .env.production
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ Stack Tecnol√≥gica

### Frontend
| Tecnologia | Uso | Vers√£o |
|------------|-----|--------|
| **React** | Biblioteca UI | 18+ |
| **Vite** | Build tool e dev server | 5+ |
| **React Router** | Roteamento SPA | 6+ |
| **Axios** | Cliente HTTP | Latest |
| **TanStack Query** | Cache e sincroniza√ß√£o de dados | 5+ |
| **Tailwind CSS** | Framework CSS | 3+ |
| **Lucide React** | √çcones | Latest |
| **React Hook Form** | Gerenciamento de formul√°rios | 7+ |
| **Zod** | Valida√ß√£o de schemas | Latest |
| **Framer Motion** | Anima√ß√µes | Latest |
| **React YouTube** | Player YouTube | Latest |
| **Vitest** | Testes unit√°rios | Latest |
| **React Testing Library** | Testes de componentes | Latest |

### Backend
| Tecnologia | Uso | Vers√£o |
|------------|-----|--------|
| **Node.js** | Runtime JavaScript | 18+ |
| **Express.js** | Framework web | 4+ |
| **MongoDB** | Banco de dados NoSQL | 6+ |
| **Mongoose** | ODM para MongoDB | 8+ |
| **JWT** | Autentica√ß√£o | Latest |
| **bcrypt** | Hash de senhas | Latest |
| **Joi** | Valida√ß√£o de dados | Latest |
| **Winston** | Logging | Latest |
| **Helmet** | Seguran√ßa HTTP headers | Latest |
| **express-rate-limit** | Rate limiting | Latest |
| **cors** | CORS | Latest |
| **dotenv** | Vari√°veis de ambiente | Latest |
| **Jest** | Framework de testes | Latest |
| **Supertest** | Testes de API | Latest |

---

## üìã Funcionalidades do Sistema

### üîù P√°gina Principal (P√∫blica)

#### Cabe√ßalho
- T√≠tulo principal: **"Estamos aqui para ajudar üöö"**
- Barra de pesquisa com placeholder: "Pesquise sua d√∫vida..."
  - Filtro em tempo real usando debounce (300ms)
  - Busca por t√≠tulo e corpo do FAQ
  - Highlight dos termos encontrados

#### Coluna Lateral - Categorias
Menu fixo vertical com as 4 categorias:
- üöõ **Cadastro**
- üìä **Monitoramento**
- üìè **Medi√ß√£o**
- üí∞ **Financeiro**

**Comportamento:**
- Categoria selecionada: fundo `#FFAD42` + texto branco
- Categoria n√£o selecionada: fundo branco + texto cinza
- Hover: leve destaque
- Contador de FAQs por categoria
- Op√ß√£o "Todas as categorias"

#### √Årea Principal - Listagem de FAQs
Cada card de FAQ cont√©m:
- **T√≠tulo** (em negrito, clic√°vel para expandir)
- **Badge(s) de categoria** (com cor `#FFAD42`)
- **Corpo da resposta** (texto rico, suporta markdown/HTML)
- **Player de v√≠deo YouTube** (se houver link)
  - Embed responsivo
  - Valida√ß√£o e extra√ß√£o autom√°tica do ID
- **Sistema de votos**:
  - "Essa resposta foi √∫til para voc√™?"
  - Bot√µes: üëç Sim / üëé N√£o
  - Contador de votos
  - Feedback visual ap√≥s voto

**Intera√ß√µes:**
- Expans√£o/recolhimento com anima√ß√£o suave
- Lazy loading para performance
- Skeleton loading durante carregamento

#### Rodap√© - Atendimento Humano
Se√ß√£o com fundo claro e centralizada:
- Texto: **"N√£o encontrou o que procurava? Fale conosco!"**
- Bot√£o WhatsApp:
  - Cor de fundo: `#FFAD42`
  - √çcone do WhatsApp
  - Texto: "Atendimento via WhatsApp"
  - Link: `https://wa.me/55XXXXXXXXXX?text=Ol√°,%20preciso%20de%20ajuda%20sobre%20o%20sistema%20FACTOR`
- Foto do atendente (c√≠rculo, ao lado do bot√£o)
- Hor√°rio de atendimento

### üîê Painel Administrativo (Protegido)

#### Login
- Autentica√ß√£o via email/senha
- JWT com refresh token
- Sess√£o persistente

#### Dashboard
- Total de FAQs publicados
- FAQs mais visualizados
- FAQs com mais votos positivos/negativos
- Gr√°ficos de analytics
- √öltimas atividades

#### Gerenciamento de FAQs
**Listagem:**
- Tabela com todas as FAQs
- Filtros por categoria e status
- Busca por t√≠tulo
- Ordena√ß√£o por data, visualiza√ß√µes, votos
- A√ß√µes: Editar, Excluir, Publicar/Despublicar

**Formul√°rio de Cria√ß√£o/Edi√ß√£o:**
- **T√≠tulo** (obrigat√≥rio, max 200 caracteres)
- **Categoria(s)** (m√∫ltipla escolha via checkboxes)
  - Cadastro
  - Monitoramento
  - Medi√ß√£o
  - Financeiro
- **Corpo** (editor rich text - TinyMCE ou Quill)
  - Suporte a formata√ß√£o
  - Links
  - Listas
  - Imagens
- **Link do v√≠deo YouTube** (opcional)
  - Valida√ß√£o de URL
  - Preview do v√≠deo
- **Status** (Publicado/Rascunho)
- **Tags** (opcional)
- Preview em tempo real
- Bot√µes: Salvar, Cancelar, Salvar como Rascunho

#### Gerenciamento de Categorias
- CRUD completo de categorias
- Definir √≠cone e cor
- Ordena√ß√£o

---

## üíª Implementa√ß√£o T√©cnica

### Componentes React - Exemplos de C√≥digo

#### 1. FAQItem Component
```jsx
// components/faq/FAQItem/FAQItem.jsx
import { useState } from 'react';
import { ChevronDown, ThumbsUp, ThumbsDown } from 'lucide-react';
import YouTubeEmbed from '@/components/common/YouTubeEmbed';
import VoteButtons from '@/components/faq/VoteButtons';

export const FAQItem = ({ faq, onVote }) => {
  const [isExpanded, setIsExpanded] = useState(false);

  return (
    <article className="bg-white rounded-lg shadow-md p-6 mb-4 transition-all hover:shadow-lg">
      <div
        className="flex justify-between items-start cursor-pointer"
        onClick={() => setIsExpanded(!isExpanded)}
      >
        <h3 className="text-lg font-semibold text-gray-800 flex-1">
          {faq.title}
        </h3>
        <ChevronDown
          className={`w-5 h-5 text-gray-500 transition-transform ${
            isExpanded ? 'rotate-180' : ''
          }`}
        />
      </div>

      <div className="flex gap-2 mt-2">
        {faq.categories.map(cat => (
          <span
            key={cat}
            className="px-3 py-1 bg-[#FFAD42] text-white text-sm rounded-full"
          >
            {cat}
          </span>
        ))}
      </div>

      {isExpanded && (
        <div className="mt-4 animate-slideDown">
          <div
            className="prose prose-sm max-w-none text-gray-700"
            dangerouslySetInnerHTML={{ __html: faq.answer }}
          />

          {faq.youtubeUrl && (
            <div className="mt-4">
              <YouTubeEmbed url={faq.youtubeUrl} />
            </div>
          )}

          <VoteButtons
            faqId={faq._id}
            helpful={faq.helpful}
            notHelpful={faq.notHelpful}
            onVote={onVote}
          />
        </div>
      )}
    </article>
  );
};
```

#### 2. SearchBar Component
```jsx
// components/common/SearchBar/SearchBar.jsx
import { useState } from 'react';
import { Search } from 'lucide-react';
import { useDebounce } from '@/hooks/useDebounce';

export const SearchBar = ({ onSearch }) => {
  const [value, setValue] = useState('');
  const debouncedValue = useDebounce(value, 300);

  useEffect(() => {
    onSearch(debouncedValue);
  }, [debouncedValue, onSearch]);

  return (
    <div className="relative max-w-2xl mx-auto">
      <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
      <input
        type="text"
        value={value}
        onChange={(e) => setValue(e.target.value)}
        placeholder="Pesquise sua d√∫vida..."
        className="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-[#FFAD42] focus:outline-none transition-colors"
      />
    </div>
  );
};
```

#### 3. CategoryFilter Component
```jsx
// components/faq/CategoryFilter/CategoryFilter.jsx
import { Truck, BarChart3, Ruler, DollarSign } from 'lucide-react';

const CATEGORIES = [
  { id: 'cadastro', name: 'Cadastro', icon: Truck },
  { id: 'monitoramento', name: 'Monitoramento', icon: BarChart3 },
  { id: 'medicao', name: 'Medi√ß√£o', icon: Ruler },
  { id: 'financeiro', name: 'Financeiro', icon: DollarSign },
];

export const CategoryFilter = ({ selected, onSelect, counts }) => {
  return (
    <aside className="w-64 bg-white rounded-lg shadow-md p-4 sticky top-4">
      <h2 className="text-lg font-semibold mb-4 text-gray-800">Categorias</h2>

      <button
        onClick={() => onSelect(null)}
        className={`w-full text-left px-4 py-3 rounded-lg mb-2 transition-colors ${
          !selected
            ? 'bg-[#FFAD42] text-white'
            : 'hover:bg-gray-100 text-gray-700'
        }`}
      >
        Todas as categorias
      </button>

      {CATEGORIES.map(({ id, name, icon: Icon }) => (
        <button
          key={id}
          onClick={() => onSelect(id)}
          className={`w-full text-left px-4 py-3 rounded-lg mb-2 flex items-center gap-3 transition-colors ${
            selected === id
              ? 'bg-[#FFAD42] text-white'
              : 'hover:bg-gray-100 text-gray-700'
          }`}
        >
          <Icon className="w-5 h-5" />
          <span className="flex-1">{name}</span>
          <span className="text-sm">{counts[id] || 0}</span>
        </button>
      ))}
    </aside>
  );
};
```

#### 4. Custom Hook - useFAQs
```jsx
// hooks/useFAQs.js
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { faqService } from '@/services/faqService';

export const useFAQs = (filters = {}) => {
  const queryClient = useQueryClient();

  const { data, isLoading, error } = useQuery({
    queryKey: ['faqs', filters],
    queryFn: () => faqService.getAll(filters),
    staleTime: 5 * 60 * 1000, // 5 minutos
  });

  const voteMutation = useMutation({
    mutationFn: ({ faqId, isHelpful }) =>
      faqService.vote(faqId, isHelpful),
    onSuccess: () => {
      queryClient.invalidateQueries(['faqs']);
    },
  });

  return {
    faqs: data?.data || [],
    isLoading,
    error,
    vote: voteMutation.mutate,
  };
};
```

### Backend - Exemplos de C√≥digo

#### 1. FAQ Model (Mongoose)
```javascript
// models/FAQ.js
const mongoose = require('mongoose');

const faqSchema = new mongoose.Schema({
  title: {
    type: String,
    required: [true, 'T√≠tulo √© obrigat√≥rio'],
    trim: true,
    maxlength: [200, 'T√≠tulo n√£o pode exceder 200 caracteres']
  },
  answer: {
    type: String,
    required: [true, 'Resposta √© obrigat√≥ria'],
    trim: true
  },
  categories: [{
    type: String,
    enum: ['cadastro', 'monitoramento', 'medicao', 'financeiro'],
    required: true
  }],
  youtubeUrl: {
    type: String,
    validate: {
      validator: function(v) {
        if (!v) return true;
        return /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+$/.test(v);
      },
      message: 'URL do YouTube inv√°lida'
    }
  },
  tags: [String],
  views: {
    type: Number,
    default: 0
  },
  helpful: {
    type: Number,
    default: 0
  },
  notHelpful: {
    type: Number,
    default: 0
  },
  isPublished: {
    type: Boolean,
    default: true
  },
  createdBy: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  }
}, {
  timestamps: true
});

// √çndices para performance
faqSchema.index({ title: 'text', answer: 'text' });
faqSchema.index({ categories: 1, isPublished: 1 });
faqSchema.index({ createdAt: -1 });

module.exports = mongoose.model('FAQ', faqSchema);
```

#### 2. FAQ Controller
```javascript
// controllers/faqController.js
const faqService = require('../services/faqService');
const { asyncHandler } = require('../utils/asyncHandler');

class FAQController {
  // Listar FAQs com filtros
  getAll = asyncHandler(async (req, res) => {
    const { category, search, page = 1, limit = 10 } = req.query;

    const result = await faqService.getAll({
      category,
      search,
      page: parseInt(page),
      limit: parseInt(limit),
      isPublished: true
    });

    res.status(200).json({
      success: true,
      data: result.faqs,
      pagination: {
        total: result.total,
        page: result.page,
        pages: result.pages
      }
    });
  });

  // Buscar FAQ por ID
  getById = asyncHandler(async (req, res) => {
    const faq = await faqService.getById(req.params.id);

    if (!faq) {
      return res.status(404).json({
        success: false,
        message: 'FAQ n√£o encontrado'
      });
    }

    // Incrementar visualiza√ß√µes
    await faqService.incrementViews(faq._id);

    res.status(200).json({
      success: true,
      data: faq
    });
  });

  // Criar FAQ (admin)
  create = asyncHandler(async (req, res) => {
    const faq = await faqService.create({
      ...req.body,
      createdBy: req.user._id
    });

    res.status(201).json({
      success: true,
      data: faq,
      message: 'FAQ criado com sucesso'
    });
  });

  // Atualizar FAQ (admin)
  update = asyncHandler(async (req, res) => {
    const faq = await faqService.update(req.params.id, req.body);

    if (!faq) {
      return res.status(404).json({
        success: false,
        message: 'FAQ n√£o encontrado'
      });
    }

    res.status(200).json({
      success: true,
      data: faq,
      message: 'FAQ atualizado com sucesso'
    });
  });

  // Deletar FAQ (admin)
  delete = asyncHandler(async (req, res) => {
    const faq = await faqService.delete(req.params.id);

    if (!faq) {
      return res.status(404).json({
        success: false,
        message: 'FAQ n√£o encontrado'
      });
    }

    res.status(200).json({
      success: true,
      message: 'FAQ deletado com sucesso'
    });
  });

  // Votar em FAQ
  vote = asyncHandler(async (req, res) => {
    const { isHelpful } = req.body;
    const faq = await faqService.vote(req.params.id, isHelpful);

    res.status(200).json({
      success: true,
      data: {
        helpful: faq.helpful,
        notHelpful: faq.notHelpful
      }
    });
  });
}

module.exports = new FAQController();
```

#### 3. FAQ Service
```javascript
// services/faqService.js
const FAQ = require('../models/FAQ');

class FAQService {
  async getAll(filters) {
    const { category, search, page, limit, isPublished } = filters;

    const query = {};

    if (isPublished !== undefined) {
      query.isPublished = isPublished;
    }

    if (category) {
      query.categories = category;
    }

    if (search) {
      query.$text = { $search: search };
    }

    const skip = (page - 1) * limit;

    const [faqs, total] = await Promise.all([
      FAQ.find(query)
        .sort({ createdAt: -1 })
        .skip(skip)
        .limit(limit)
        .populate('createdBy', 'name email'),
      FAQ.countDocuments(query)
    ]);

    return {
      faqs,
      total,
      page,
      pages: Math.ceil(total / limit)
    };
  }

  async getById(id) {
    return FAQ.findById(id).populate('createdBy', 'name email');
  }

  async create(data) {
    const faq = new FAQ(data);
    return faq.save();
  }

  async update(id, data) {
    return FAQ.findByIdAndUpdate(id, data, {
      new: true,
      runValidators: true
    });
  }

  async delete(id) {
    return FAQ.findByIdAndDelete(id);
  }

  async vote(id, isHelpful) {
    const field = isHelpful ? 'helpful' : 'notHelpful';
    return FAQ.findByIdAndUpdate(
      id,
      { $inc: { [field]: 1 } },
      { new: true }
    );
  }

  async incrementViews(id) {
    return FAQ.findByIdAndUpdate(
      id,
      { $inc: { views: 1 } },
      { new: true }
    );
  }

  async getCategoryCounts() {
    const counts = await FAQ.aggregate([
      { $match: { isPublished: true } },
      { $unwind: '$categories' },
      { $group: { _id: '$categories', count: { $sum: 1 } } }
    ]);

    return counts.reduce((acc, { _id, count }) => {
      acc[_id] = count;
      return acc;
    }, {});
  }
}

module.exports = new FAQService();
```

#### 4. Rotas
```javascript
// routes/faqRoutes.js
const express = require('express');
const faqController = require('../controllers/faqController');
const { authMiddleware, adminMiddleware } = require('../middleware/auth');
const { validate } = require('../middleware/validate');
const { faqValidator } = require('../validators/faqValidator');

const router = express.Router();

// Rotas p√∫blicas
router.get('/', faqController.getAll);
router.get('/:id', faqController.getById);
router.post('/:id/vote', faqController.vote);

// Rotas admin (protegidas)
router.post(
  '/',
  authMiddleware,
  adminMiddleware,
  validate(faqValidator.create),
  faqController.create
);

router.put(
  '/:id',
  authMiddleware,
  adminMiddleware,
  validate(faqValidator.update),
  faqController.update
);

router.delete(
  '/:id',
  authMiddleware,
  adminMiddleware,
  faqController.delete
);

module.exports = router;
```

#### 5. Valida√ß√£o (Joi)
```javascript
// validators/faqValidator.js
const Joi = require('joi');

const faqValidator = {
  create: Joi.object({
    title: Joi.string().required().max(200).messages({
      'string.empty': 'T√≠tulo √© obrigat√≥rio',
      'string.max': 'T√≠tulo n√£o pode exceder 200 caracteres'
    }),
    answer: Joi.string().required().messages({
      'string.empty': 'Resposta √© obrigat√≥ria'
    }),
    categories: Joi.array()
      .items(Joi.string().valid('cadastro', 'monitoramento', 'medicao', 'financeiro'))
      .min(1)
      .required()
      .messages({
        'array.min': 'Selecione pelo menos uma categoria'
      }),
    youtubeUrl: Joi.string().uri().allow('').optional(),
    tags: Joi.array().items(Joi.string()).optional(),
    isPublished: Joi.boolean().default(true)
  }),

  update: Joi.object({
    title: Joi.string().max(200),
    answer: Joi.string(),
    categories: Joi.array()
      .items(Joi.string().valid('cadastro', 'monitoramento', 'medicao', 'financeiro'))
      .min(1),
    youtubeUrl: Joi.string().uri().allow(''),
    tags: Joi.array().items(Joi.string()),
    isPublished: Joi.boolean()
  }).min(1)
};

module.exports = { faqValidator };
```

#### 6. Middleware de Autentica√ß√£o
```javascript
// middleware/auth.js
const jwt = require('jsonwebtoken');
const User = require('../models/User');

const authMiddleware = async (req, res, next) => {
  try {
    const token = req.headers.authorization?.split(' ')[1];

    if (!token) {
      return res.status(401).json({
        success: false,
        message: 'Token de acesso necess√°rio'
      });
    }

    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    const user = await User.findById(decoded.id).select('-password');

    if (!user) {
      return res.status(401).json({
        success: false,
        message: 'Token inv√°lido'
      });
    }

    req.user = user;
    next();
  } catch (error) {
    return res.status(401).json({
      success: false,
      message: 'Token inv√°lido ou expirado'
    });
  }
};

const adminMiddleware = (req, res, next) => {
  if (req.user.role !== 'admin') {
    return res.status(403).json({
      success: false,
      message: 'Acesso negado. Apenas administradores'
    });
  }
  next();
};

module.exports = { authMiddleware, adminMiddleware };
```

---

## üîí Seguran√ßa

### Backend
```javascript
// app.js
const express = require('express');
const helmet = require('helmet');
const mongoSanitize = require('express-mongo-sanitize');
const xss = require('xss-clean');
const rateLimit = require('express-rate-limit');
const cors = require('cors');

const app = express();

// Security headers
app.use(helmet());

// Sanitiza√ß√£o contra NoSQL injection
app.use(mongoSanitize());

// Preven√ß√£o XSS
app.use(xss());

// Rate limiting
const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutos
  max: 100, // 100 requisi√ß√µes por IP
  message: 'Muitas requisi√ß√µes deste IP, tente novamente mais tarde'
});
app.use('/api/', limiter);

// CORS
app.use(cors({
  origin: process.env.FRONTEND_URL,
  credentials: true
}));

// Body parser
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true, limit: '10mb' }));
```

---

## üß™ Testes

### Frontend (Vitest + React Testing Library)
```jsx
// components/faq/FAQItem/FAQItem.test.jsx
import { render, screen, fireEvent } from '@testing-library/react';
import { FAQItem } from './FAQItem';

describe('FAQItem', () => {
  const mockFAQ = {
    _id: '1',
    title: 'Como cadastrar transportadora?',
    answer: '<p>Acesse o menu Empresas...</p>',
    categories: ['cadastro'],
    helpful: 10,
    notHelpful: 2
  };

  it('deve renderizar t√≠tulo da FAQ', () => {
    render(<FAQItem faq={mockFAQ} />);
    expect(screen.getByText(mockFAQ.title)).toBeInTheDocument();
  });

  it('deve expandir resposta ao clicar', () => {
    render(<FAQItem faq={mockFAQ} />);

    const title = screen.getByText(mockFAQ.title);
    fireEvent.click(title);

    expect(screen.getByText(/Acesse o menu Empresas/)).toBeInTheDocument();
  });

  it('deve exibir categorias', () => {
    render(<FAQItem faq={mockFAQ} />);
    expect(screen.getByText('cadastro')).toBeInTheDocument();
  });
});
```

### Backend (Jest + Supertest)
```javascript
// tests/integration/faq.test.js
const request = require('supertest');
const app = require('../../src/app');
const FAQ = require('../../src/models/FAQ');

describe('FAQ API', () => {
  beforeEach(async () => {
    await FAQ.deleteMany({});
  });

  describe('GET /api/faqs', () => {
    it('deve retornar todas as FAQs publicadas', async () => {
      await FAQ.create({
        title: 'Teste',
        answer: 'Resposta',
        categories: ['cadastro'],
        createdBy: 'userId'
      });

      const res = await request(app)
        .get('/api/faqs')
        .expect(200);

      expect(res.body.success).toBe(true);
      expect(res.body.data).toHaveLength(1);
    });

    it('deve filtrar por categoria', async () => {
      await FAQ.create([
        {
          title: 'FAQ 1',
          answer: 'Resposta 1',
          categories: ['cadastro'],
          createdBy: 'userId'
        },
        {
          title: 'FAQ 2',
          answer: 'Resposta 2',
          categories: ['financeiro'],
          createdBy: 'userId'
        }
      ]);

      const res = await request(app)
        .get('/api/faqs?category=cadastro')
        .expect(200);

      expect(res.body.data).toHaveLength(1);
      expect(res.body.data[0].categories).toContain('cadastro');
    });
  });

  describe('POST /api/faqs', () => {
    it('deve criar nova FAQ com autentica√ß√£o', async () => {
      const newFAQ = {
        title: 'Nova FAQ',
        answer: 'Nova resposta',
        categories: ['monitoramento']
      };

      const res = await request(app)
        .post('/api/faqs')
        .set('Authorization', `Bearer ${adminToken}`)
        .send(newFAQ)
        .expect(201);

      expect(res.body.data.title).toBe(newFAQ.title);
    });

    it('deve retornar erro sem autentica√ß√£o', async () => {
      await request(app)
        .post('/api/faqs')
        .send({ title: 'Teste' })
        .expect(401);
    });
  });
});
```

---

## üåç Vari√°veis de Ambiente

### Backend (.env)
```bash
# Server
NODE_ENV=development
PORT=5000

# Database
MONGODB_URI=mongodb://localhost:27017/factor-faq
# ou PostgreSQL:
# DATABASE_URL=postgresql://user:password@localhost:5432/factor-faq

# JWT
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRE=7d
JWT_REFRESH_SECRET=your-refresh-token-secret
JWT_REFRESH_EXPIRE=30d

# CORS
FRONTEND_URL=http://localhost:3000

# Email (opcional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# WhatsApp
WHATSAPP_NUMBER=5511999999999
```

### Frontend (.env)
```bash
VITE_API_URL=http://localhost:5000/api
VITE_APP_NAME=Factor FAQ
VITE_WHATSAPP_NUMBER=5511999999999
VITE_WHATSAPP_MESSAGE=Ol√°, preciso de ajuda sobre o sistema FACTOR
```

---

## üì¶ Scripts Package.json

### Frontend
```json
{
  "name": "factor-faq-frontend",
  "version": "1.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext js,jsx --report-unused-disable-directives --max-warnings 0",
    "format": "prettier --write \"src/**/*.{js,jsx,json,css}\"",
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest --coverage"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "@tanstack/react-query": "^5.17.0",
    "axios": "^1.6.2",
    "react-hook-form": "^7.49.2",
    "zod": "^3.22.4",
    "@hookform/resolvers": "^3.3.3",
    "lucide-react": "^0.303.0",
    "framer-motion": "^10.16.16",
    "react-youtube": "^10.1.0",
    "clsx": "^2.0.0"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.2.1",
    "vite": "^5.0.8",
    "tailwindcss": "^3.4.0",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.32",
    "eslint": "^8.56.0",
    "prettier": "^3.1.1",
    "vitest": "^1.1.0",
    "@testing-library/react": "^14.1.2",
    "@testing-library/jest-dom": "^6.1.5"
  }
}
```

### Backend
```json
{
  "name": "factor-faq-backend",
  "version": "1.0.0",
  "scripts": {
    "start": "node src/server.js",
    "dev": "nodemon src/server.js",
    "test": "jest --watchAll --verbose",
    "test:coverage": "jest --coverage",
    "lint": "eslint . --ext .js",
    "format": "prettier --write \"src/**/*.js\""
  },
  "dependencies": {
    "express": "^4.18.2",
    "mongoose": "^8.0.3",
    "jsonwebtoken": "^9.0.2",
    "bcryptjs": "^2.4.3",
    "joi": "^17.11.0",
    "dotenv": "^16.3.1",
    "cors": "^2.8.5",
    "helmet": "^7.1.0",
    "express-rate-limit": "^7.1.5",
    "express-mongo-sanitize": "^2.2.0",
    "xss-clean": "^0.1.4",
    "winston": "^3.11.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.2",
    "jest": "^29.7.0",
    "supertest": "^6.3.3",
    "eslint": "^8.56.0",
    "prettier": "^3.1.1"
  }
}
```

---

## üì° API REST - Documenta√ß√£o

### Base URL
```
http://localhost:5000/api
```

### Endpoints

#### FAQs

| M√©todo | Endpoint | Descri√ß√£o | Auth |
|--------|----------|-----------|------|
| GET | `/faqs` | Lista todas FAQs | N√£o |
| GET | `/faqs/:id` | Busca FAQ por ID | N√£o |
| POST | `/faqs` | Cria nova FAQ | Admin |
| PUT | `/faqs/:id` | Atualiza FAQ | Admin |
| DELETE | `/faqs/:id` | Deleta FAQ | Admin |
| POST | `/faqs/:id/vote` | Vota em FAQ | N√£o |

**GET /faqs - Query Parameters:**
```
?category=cadastro          # Filtrar por categoria
&search=transportadora      # Busca por termo
&page=1                     # Pagina√ß√£o
&limit=10                   # Itens por p√°gina
&sort=-createdAt           # Ordena√ß√£o
```

**POST /faqs - Request Body:**
```json
{
  "title": "Como cadastrar transportadora?",
  "answer": "<p>Para cadastrar...</p>",
  "categories": ["cadastro"],
  "youtubeUrl": "https://youtube.com/watch?v=xxxxx",
  "tags": ["cadastro", "transportadora"],
  "isPublished": true
}
```

**POST /faqs/:id/vote - Request Body:**
```json
{
  "isHelpful": true  // true para üëç, false para üëé
}
```

#### Categorias

| M√©todo | Endpoint | Descri√ß√£o | Auth |
|--------|----------|-----------|------|
| GET | `/categories` | Lista categorias | N√£o |
| GET | `/categories/counts` | Contador por categoria | N√£o |
| POST | `/categories` | Cria categoria | Admin |
| PUT | `/categories/:id` | Atualiza categoria | Admin |
| DELETE | `/categories/:id` | Deleta categoria | Admin |

#### Autentica√ß√£o

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| POST | `/auth/register` | Registra admin |
| POST | `/auth/login` | Login |
| POST | `/auth/refresh` | Refresh token |
| POST | `/auth/logout` | Logout |
| GET | `/auth/me` | Usu√°rio atual |

**POST /auth/login - Request:**
```json
{
  "email": "admin@factor.com",
  "password": "senha123"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "xxx",
      "name": "Admin",
      "email": "admin@factor.com",
      "role": "admin"
    },
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIs..."
  }
}
```

---

## üöÄ Deploy

### Frontend (Vercel)
```bash
# Instalar Vercel CLI
npm i -g vercel

# Deploy
vercel --prod

# Ou via GitHub (autom√°tico)
# Push para main -> deploy autom√°tico
```

**vercel.json:**
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite",
  "rewrites": [
    { "source": "/(.*)", "destination": "/index.html" }
  ]
}
```

### Backend (Railway/Render)

**Railway:**
```bash
# Instalar Railway CLI
npm i -g @railway/cli

# Login
railway login

# Deploy
railway up
```

**Render:**
- Conectar reposit√≥rio GitHub
- Build Command: `npm install`
- Start Command: `npm start`
- Adicionar vari√°veis de ambiente

### Banco de Dados

**MongoDB Atlas:**
1. Criar cluster gratuito
2. Configurar IP Whitelist (0.0.0.0/0 para acesso p√∫blico)
3. Criar usu√°rio
4. Copiar connection string
5. Atualizar `MONGODB_URI` no .env

---

## üéØ Configura√ß√£o do Tailwind

```javascript
// tailwind.config.js
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,jsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: '#FFAD42',
        secondary: '#2C3E50',
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
      },
      animation: {
        slideDown: 'slideDown 0.3s ease-out',
      },
      keyframes: {
        slideDown: {
          '0%': { opacity: '0', transform: 'translateY(-10px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' },
        },
      },
    },
  },
  plugins: [
    require('@tailwindcss/typography'),
  ],
}
```

---

## üìä Melhorias Futuras

### Fase 2
- [ ] Sistema de notifica√ß√µes para admins
- [ ] Analytics completo (Google Analytics, Hotjar)
- [ ] Sistema de tags e busca avan√ßada
- [ ] Exporta√ß√£o de FAQs (PDF, CSV)
- [ ] Versionamento de FAQs (hist√≥rico)
- [ ] Coment√°rios e discuss√µes em FAQs
- [ ] Sistema de anexos (PDFs, imagens)

### Fase 3
- [ ] PWA (Progressive Web App)
- [ ] Modo offline
- [ ] Internacionaliza√ß√£o (PT/EN/ES)
- [ ] Dark mode
- [ ] ElasticSearch para busca avan√ßada
- [ ] Redis para cache
- [ ] GraphQL como alternativa REST
- [ ] WebSocket para atualiza√ß√µes em tempo real

### Fase 4
- [ ] API p√∫blica com documenta√ß√£o Swagger
- [ ] Rate limiting por usu√°rio
- [ ] M√©tricas e dashboard de analytics
- [ ] A/B testing de respostas
- [ ] IA para sugest√µes de FAQs relacionados
- [ ] Chatbot integrado

---

## üìù Comandos de Instala√ß√£o

### Iniciar Projeto Frontend
```bash
# Criar projeto Vite + React
npm create vite@latest frontend -- --template react

cd frontend

# Instalar depend√™ncias
npm install react-router-dom @tanstack/react-query axios react-hook-form zod @hookform/resolvers lucide-react framer-motion react-youtube clsx

# Instalar Tailwind
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Instalar ferramentas de desenvolvimento
npm install -D eslint prettier vitest @testing-library/react @testing-library/jest-dom

# Rodar projeto
npm run dev
```

### Iniciar Projeto Backend
```bash
# Criar diret√≥rio
mkdir backend && cd backend

# Inicializar npm
npm init -y

# Instalar depend√™ncias
npm install express mongoose jsonwebtoken bcryptjs joi dotenv cors helmet express-rate-limit express-mongo-sanitize xss-clean winston

# Instalar dev dependencies
npm install -D nodemon jest supertest eslint prettier

# Rodar projeto
npm run dev
```

---

## üìö Recursos e Documenta√ß√£o

- **React**: https://react.dev/
- **Vite**: https://vitejs.dev/
- **TanStack Query**: https://tanstack.com/query/latest
- **Tailwind CSS**: https://tailwindcss.com/
- **Express**: https://expressjs.com/
- **Mongoose**: https://mongoosejs.com/
- **JWT**: https://jwt.io/

---

## üë• Equipe e Contato

**Desenvolvedor:** [Seu nome]
**Empresa:** FACTOR - Sistemas para Transportadoras
**Suporte:** [WhatsApp configurado]

---

## üìÑ Licen√ßa

Propriedade da empresa FACTOR. Todos os direitos reservados.
